# Pharkin-Soil_light_sensor

1. GY-302 เซนเซอร์วัดความเข้มแสง Ambient Light lux Sensor Module (BH1750FVI) เซนเซอร์แสง 
2. เซนเซอร์วัดความชื้นในดิน Soil Moisture Sensor Module v1 
3. รีเลย์แบบ 1 ช่อง 5V relay module optocoupler isolation high and low level trigger MCU red board
4. ไมโครมอเตอร์ DC 3V-6V 16500 rpm จำนวน 2 ตัว 
5. NodeMCU V3 ESP8266 WiFi CH340 IoT Development Board คอนโทรลเลอร์ พัฒนาบน Arduino IDE 
6. NodeMcu Node MCU Base ESP8266 Testing DIY Breadboard Basics Tester suitable for NodeMcu V3 
7.  แอพพลิเคชัน Blynk 

ซึ่งมีหลักการทำงานคือ 
1. 
1.1) หากเซนเซอร์ตรวจจับความชื้นภายในดินตรวจจับได้ว่าค่าความชื้นภายในดินมีค่าต่ำกว่าช่วงความชื้นที่กำหนดไว้ให้สั่งการไปยังรีเลย์ให้ทำการปล่อยไฟฟ้าให้กับเครื่องปั๊มน้ำทำการปั๊มน้ำ 
1.2) และหากเซนเซอร์ตรวจจับได้ว่าค่าความชื้นภายในดินมีค่าเกินกว่าช่วงที่กำหนดให้สั่งการไปให้รีเลย์ให้หยุดการจ่ายไฟให้กับเครื่องปั๊มน้ำ 
1.3) และหากค่าความชื้นภายในดินที่ตรวจจับได้อยู่ในช่วงที่กำหนดไว้ไม่ต้องสั่งการใดๆ 
1.4) โดยที่กำหนดให้ค่าความชื้นภายในดินอยู่ในช่วง 50%-69%

2. หากเซนเซอร์ตรวจจับความเข้มแสง
2.1)ตรวจจับได้ว่าค่าความเข้มแสงมีค่าเกินกว่าช่วงที่กำหนดไว้ให้ทำการสั่งการให้มอเตอร์ตัวหนึ่งหมุนตามเข็มนาฬิกาและมอเตอร์อีกตัวหนึ่งหมุนทวนเข็มนาฬิกาเป็นเวลา 20 วินาทีโดยที่มอเตอร์ทั้ง 2 ตัวนั้นต้องหมุนไปพร้อมๆกัน 
ต่อมาหากเซนเซอร์ตรวจจับความเข้มแสงตรวจจับได้ว่าค่าความเข้มแสงมีค่าต่ำกว่าช่วงที่กำหนดไว้ให้ทำการสั่งการให้มอเตอร์ทั้งสอง 2 ตัวหมุนต่อในทิศทางเดิมจากตำแหน่งเดิมเป็นเวลาอีก 20 วินาที 
2.2) ต่อมาหากเซนเซอร์ตรวจจับความเข้มแสงสามารถตรวจจับได้ว่าค่าความเข้มแสงนั้นมีค่ามากกว่าช่วงที่กำหนดอีกครั้งให้ทำการสั่งการให้มอเตอร์ที่แต่เดิมหมุนตามเข็มนาฬิกาเปลี่ยนไปเป็นหมุนทวนเข็มนาฬิกา
และมอเตอร์ที่แต่เดิมหมุนตามทวนเข็มนาฬิกาเปลี่ยนไปเป็นหมุนตามเข็มนาฬิกาโดยที่มอเตอร์ทั้ง 2 หมุนเป็นเวลา 30 วินาทีพร้อมๆกัน 
ต่อมาหากเซนเซอร์ตรวจจับความเข้มแสงตรวจจับได้ว่าค่าความเข้มแสงมีค่าต่ำกว่าช่วงที่กำหนดไว้ให้ทำการสั่งการให้มอเตอร์ทั้งสอง 2 ตัวหมุนต่อในทิศทางเดิมจากตำแหน่งเดิมเป็นเวลาอีก 20 วินาที 
2.3) กำหนดให้ค่าความเข้มแสงอยู่ในช่วง 10000 lux - 13000 lux                           

3. 
3.1) หากเซนเซอร์ตรวจจับความชื้นภายในดินตวจจับได้ว่าค่าความชื้นภายในดินมีค่าเกินกว่าที่กำหนดให้ทำการสั่งการให้มอเตอร์ตัวหนึ่งหมุนตามเข็มนาฬิกาและมอเตอร์อีกตัวหนึ่งหมุนทวนเข็มนาฬิกาเป็นเวลา 20 วินาทีโดยที่มอเตอร์ทั้ง 2 ตัวนั้นต้องหมุนไปพร้อมๆกัน 
3.2) ต่อมาหากเซนเซอร์ตรวจจับความชื้นภายในดินตรวจจับได้ว่าค่าความชื้นภายในดินกลับมาอยู่ในช่วงที่กำหนดไว้ให้ทำการสั่งการให้มอเตอร์ที่แต่เดิมหมุนตามทวนเข็มนาฬิกาเปลี่ยนไปเป็นหมุนตามเข็มนาฬิกาและมอเตอร์ที่แต่เดิมหมุนตามเข็มนาฬิกาเปลี่ยนไปเป็นหมุนทวนเข็มนาฬิกาโดยที่มอเตอร์ทั้ง 2 หมุนเป็นเวลา 30 วินาทีพร้อมๆกัน 
3.3) กำหนดให้ค่าความชื้นภายในดินอยู่ในช่วง 50%-69%  

4. การเชื่อมต่อ บอร์ด ESP8266 กับแอพพลิเคชั่น Blynk โดยที่ต้องการให้ภายในแอพพลิเคชั่น Blynk บอกถึงระดับความชื้นภายในดิน ณ ขณะที่ตรวจกำลังสอบผ่านแอพพลิเคชั่น Blynk รวมถึงค่าความเข้มแสงด้วย และการทำงานล่าสุดของระบบคือการเปิดเครื่องปั๊มน้ำล่าสุดเมื่อเวลาใด และการทำงานล่าสุดของมอเตอร์ทั้ง 2 ตัวเป็นเวลาเมื่อใด
